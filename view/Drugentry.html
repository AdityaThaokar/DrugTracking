<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Drug Entry</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>	

   <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
	<style type="text/css">
		.card{
			padding: 10px;
			box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
		}
		form {
			padding: 10px;
		}
		body
		{
			background-color: #090b1e;
		}
		.container p{
			color: white;
		}
		h3{
			color: white;
		}
	</style>

</head>
<body>
		<div class="container-fluid">
		<nav class="navbar col-bg-12">
			<ul class="nav nav-pills">
		  <li class="nav-item">
		    <a class="nav-link " href="Home.html">Home</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link active" href="Drugentry.html">Drug Entry</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="Drugvalidation.html">Drug Validation</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="Drugupdation.html">Ownership Updation</a>
		  </li>
		</nav>
	</div>
		<br>
		<div class="container col-lg-4">
			<h3>Add drug in the list</h3>
			<div class="card">
					<div>
	    			<label for="Dname">Drug Name : </label>
	    			<input type="text" class="form-control" id="Dname" placeholder="Enter Drug Name">
	  				</div>
	  				
	  				<div >
	    			<label for="Oname">Drug ID : </label>
	    			<input type="text" class="form-control" id="DId" placeholder="Enter ID">
	  				</div>
					<div >
	    			<label for="Oname">Owner's Name : </label>
	    			<input type="text" class="form-control" id="Oname" placeholder="Enter Owner's Name">
	  				</div>
	  		<!-- 		<div class="form-group ">
	    			<label for="Edate">Expiry Date : </label>
	    			<input type="date" class="form-control" id="Edate" placeholder="Enter Expiry date">
	  				</div>
	  				<div class="form-group ">
	    			<label for="Mrp">MRP (in Rs.) : </label>
	    			<input type="text" class="form-control" id="Mrp" placeholder="Enter the price of drug">
	  				</div> -->
	  				<button  class="btn btn-info" id="Entry">Submit</button>
				
			</div>
		</div>
	<br><br>
	<div class="container bottom">
	<footer>
		<center><small>
	<p>&copy;Team Access Dismissed - participated in Bitcamp-2K19</a>.</p>
		</center></small>
	</footer>
</body>
<script src="web3.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script>
if (typeof web3 != 'undefined') 
{
 web3 = new Web3(web3.currentProvider);
 } 
else 
{
web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
 }
 	web3.eth.defaultAccount = web3.eth.accounts[0];
 var addr = '0x7d23f8b2ae75902b5cfd3c173d626b8d76c5abc8'; 
         var abi = [
	{
		"constant": true,
		"inputs": [],
		"name": "count",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "drug_id",
				"type": "uint256"
			},
			{
				"name": "oname",
				"type": "string"
			}
		],
		"name": "addTransactions",
		"outputs": [
			{
				"name": "",
				"type": "string[]"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "Record",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "drug_owner_list",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "drug_id",
				"type": "uint256"
			}
		],
		"name": "getTransactions",
		"outputs": [
			{
				"name": "",
				"type": "string[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_fName",
				"type": "string"
			},
			{
				"name": "_drug_id",
				"type": "uint256"
			},
			{
				"name": "_oname",
				"type": "string"
			}
		],
		"name": "setDrug",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_drug_id",
				"type": "uint256"
			}
		],
		"name": "validateDrug",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "drug_count",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_fName",
				"type": "string"
			},
			{
				"name": "_drug_id",
				"type": "uint256"
			},
			{
				"name": "_onamenew",
				"type": "string"
			}
		],
		"name": "updateOwner",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getTransactionsLength",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getDrug",
		"outputs": [
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "name",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "drug_id",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "oname",
				"type": "string"
			}
		],
		"name": "Drug",
		"type": "event"
	}
]

var CoursetroContract = web3.eth.contract(abi);


// var Coursetro = CoursetroContract.at(addr,{"from":"0xe9d3a57c3236e9421500784fa893589f1f664b48","gasLimit":999999999999999});

var Coursetro = CoursetroContract.at(addr);

$("#Entry").click(function(){

	var oname = document.getElementById("Oname").value;
	var dname = document.getElementById("Dname").value;
	var did = document.getElementById("DId").value;
	did=parseInt(did);
	result = Coursetro.setDrug(dname,did,oname,{gas:4712388});
		//Coursetro.setDrug(dname,did,oname);

	console.log(result);
});

</script>
</html>
			